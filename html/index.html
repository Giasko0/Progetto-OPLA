<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="static/imgs/favicon.ico">
  <title>OPLÀ - Portale Online per Prenotare Laboratori e Aule</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="static/styles/style.css">
  <script src="static/scripts/darkMode.js"></script>
  <script src="static/scripts/auth.js"></script>
  <script src="static/scripts/navbar.js"></script>
  <script src="static/scripts/footer.js"></script>
  <script>
    // Script per gestire il comportamento dinamico del pulsante CTA
    document.addEventListener('DOMContentLoaded', function() {
      const ctaButton = document.querySelector('.cta-button');
      if (ctaButton) {
        // Controlla lo stato di autenticazione dell'utente
        window.getUserData().then(data => {
          if (data && data.authenticated) {
            // Se l'utente è già autenticato, il pulsante porta al calendario
            ctaButton.href = 'calendario.html';
            ctaButton.textContent = 'Vai al calendario';
          } else {
            // Se l'utente non è autenticato, il pulsante porta al login con redirect
            ctaButton.href = `login.html?redirect=${encodeURIComponent('/calendario.html')}`;
            ctaButton.textContent = 'Accedi ora';
          }
        }).catch(error => {
          console.error('Errore nel controllo dell\'autenticazione:', error);
          // In caso di errore, impostare il comportamento predefinito
          ctaButton.href = `login.html?redirect=${encodeURIComponent('/calendario.html')}`;
        });
      }
    });
  </script>
</head>

<body>
  <div id="navbar"></div>
  
  <div class="content">
    <div class="container-panel landing-container">
      <h1 class="title-primary title-xl">Benvenuto in OPLÀ</h1>
      <p class="subtitle">Portale Online per Prenotare Laboratori e Aule dell'Università degli Studi di Perugia</p>
      
      <div class="flex-container flex-spaced">
        <div class="card">
          <span class="material-symbols-outlined card-icon">calendar_month</span>
          <h3 class="card-title">Gestione Appelli</h3>
          <p>Inserisci e gestisci facilmente tutti i tuoi appelli d'esame</p>
        </div>
        <div class="card">
          <span class="material-symbols-outlined card-icon">school</span>
          <h3 class="card-title">Organizzazione Corsi</h3>
          <p>Visualizza e organizza i corsi e gli insegnamenti</p>
        </div>
        <div class="card">
          <span class="material-symbols-outlined card-icon">meeting_room</span>
          <h3 class="card-title">Prenotazione Aule</h3>
          <p>Verifica la disponibilità e prenota le aule per i tuoi esami</p>
        </div>
      </div>
      
      <p>Accedi con le tue credenziali per utilizzare tutte le funzionalità della piattaforma</p>
      <a href="login.html" class="cta-button">Accedi ora</a>
      
      <p style="margin-top: 40px; font-size: 0.9rem;">Per assistenza tecnica contattare <a class="email-link" href="mailto:opla.dmi@unipg.it">opla.dmi@unipg.it</a></p>
    </div>
  </div>
  
  <footer id="footer"></footer>
</body>

</html>
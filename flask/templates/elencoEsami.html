{% extends "template.html" %}

{% block head %}
<title>Elenco Esami</title>
<style>
  table {
    width: clamp(500px, 50vw, 1000px);
    border-collapse: collapse;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #bbb;
    background-color: white;
  }

  thead th {
    background-color: #27348b;
    color: white;
    font-weight: bold;
    cursor: pointer;
  }

  th,
  td {
    padding: 12px;
    border: 1px solid #bbb;
  }

  tbody tr:hover td {
    background-color: #f1f1f1;
  }
</style>
<script src="{{ url_for('static', filename='scripts/elencoEsami.js') }}"></script>
<script>
  function sortTable(colIndex) {
    const table = document.getElementById("tabella");
    let switching = true;
    let dir = "asc";
    let switchcount = 0;
    while (switching) {
      switching = false;
      let rows = table.tBodies[0].rows;
      for (let i = 0; i < rows.length - 1; i++) {
        let shouldSwitch = false;
        let x = rows[i].getElementsByTagName("TD")[colIndex];
        let y = rows[i + 1].getElementsByTagName("TD")[colIndex];
        let xText = x.textContent.trim().toLowerCase();
        let yText = y.textContent.trim().toLowerCase();
        if (dir === "asc" && xText > yText) {
          shouldSwitch = true;
        } else if (dir === "desc" && xText < yText) {
          shouldSwitch = true;
        }
        if (shouldSwitch) {
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          switching = true;
          switchcount++;
          break;
        }
      }
      if (switchcount === 0 && dir === "asc") {
        dir = "desc";
        switching = true;
      }
    }
  }

  window.onload = insertEsami;
</script>
{% endblock %}

{% block body %}
<h1>Elenco Esami</h1>
<table id="tabella">
  <thead>
    <tr>
      <th onclick="sortTable(0)">Docente</th>
      <th onclick="sortTable(1)">Insegnamento</th>
      <th onclick="sortTable(2)">Aula</th>
      <th onclick="sortTable(3)">Data</th>
    </tr>
  </thead>
  
  <tbody id="corpoTabella"></tbody>
</table>
{% endblock %}